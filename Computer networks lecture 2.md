## Домашнее задание к занятию "3.7. Компьютерные сети, лекция 2"

1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?  

Ответ: В Windows это команда `ipconfig /all` в Linux раньше использовали `ifconfig` сейчас чаще всего используют
команду `ip` [скриншот_1](https://drive.google.com/file/d/1khHOMdfHPEOfwkFgLbl2r6GYQc6rMZyQ/view?usp=sharing)  
[скриншот_2](https://drive.google.com/file/d/1cF-2uVbqS6ItAstILuho-Tmh4yLQTJXj/view?usp=sharing)

2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть   
в Linux для этого?  

Ответ: LLDP – протокол для обмена информацией между соседними устройствами,
позволяет определить к какому порту коммутатора подключен сервер. Пакет `lldpd`. Команда `lldpctl.`
   
3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и
команды есть в Linux для этого? Приведите пример конфига.  
Ответ: Технология называется VLAN (Virtual LAN). Пакет в Ubuntu Linux так и называется, `vlan`  
`network:  

  version: 2  

  renderer: networkd  

  ethernets:  

    ens4:  

      optional: yes  

      addresses:  

        - 192.168.0.2/24  

  vlans:  

    vlan88:  

      id: 88   

      link: ens4  

      addresses:  

        - 192.168.1.2/24  `

4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.  
Ответ: LAG – агрегация портов Позволяет использовать несколько физических интерфейсов как один
логический.   
Типы LAG:  

● статический (на Cisco mode on);  

● динамический – LACP протокол (на Cisco mode active)   

Режимы работы:
* `mode=0 (balance-rr)`-При этом методе объединения трафик распределяется по принципу «карусели»: пакеты по очереди направляются на сетевые карты объединённого интерфейса. Например, если у нас есть физические интерфейсы eth0, eth1, and eth2, объединенные в bond0, первый пакет будет отправляться через eth0, второй — через eth1, третий — через eth2, а четвертый снова через eth0 и т.д.
* `mode=1 (active-backup`)-Когда используется этот метод, активен только один физический интерфейс, а остальные работают как резервные на случай отказа основного.
* `mode=2 (balance-xor)`- В данном случае объединенный интерфейс определяет, через какую физическую сетевую карту отправить пакеты, в зависимости от MAC-адресов источника и получателя.
* `mode=3 (broadcast)`- Широковещательный режим, все пакеты отправляются через каждый интерфейс. Имеет ограниченное применение, но обеспечивает значительную отказоустойчивость.
* `mode=4 (802.3ad)`-Особый режим объединения. Для него требуется специально настраивать коммутатор, к которому подключен объединенный интерфейс. Реализует стандарты объединения каналов IEEE и обеспечивает как увеличение пропускной способности, так и отказоустойчивость.
* `mode=5 (balance-tlb)`-Распределение нагрузки при передаче. Входящий трафик обрабатывается в обычном режиме, а при передаче интерфейс определяется на основе данных о загруженности.
* `mode=6 (balance-alb)` - Адаптивное распределение нагрузки. Аналогично предыдущему режиму, но с возможностью балансировать также входящую нагрузку.  

 active-backup на отказоустойчивость: [скриншот](https://drive.google.com/file/d/16VqQm5AcKvromoaynzkaPA4Wox5kFk0O/view?usp=sharing)
 balance-alb - балансировка: [скриншот](https://drive.google.com/file/d/1YqkeDwcDFqcMRAfry3rgAhGE8w38HFlr/view?usp=sharing) 
 5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24.  
Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.  
Ответ: 8 адресов = 6 для хостов, 1 адрес сети и 1 широковещательный адрес.
Сеть с маской /24 можно разбить на 32 подсети с маской /29 [скриншот](https://drive.google.com/file/d/1v2q82hPlZW-dK74IEkiQKCixhTa7klt9/view?usp=sharing) 
 6. Задача: вас попросили организовать стык между 2-мя организациями.  
Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса?   
Маску выберите из расчета максимум 40-50 хостов внутри подсети.  
Ответ:  Можно взять адреса из сети для CGNAT - 100.64.0.0/10. [скриншот](https://drive.google.com/file/d/1DMzwhomraoZc3LUQeDjkl2-Wy2HGRaVJ/view?usp=sharing) 
Маска для диапазонов будет /26, она позволит подключить 62 хоста.  
 7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью?   
Как из ARP таблицы удалить только один нужный IP?  
Ответ: Проверить таблицу можно так:  


    Linux: ip neigh, arp -n
    Windows: arp -a

Очистить кеш так:

    Linux: ip neigh flush
    Windows: arp -d *

Удалить один IP так:

    Linux: ip neigh delete <IP> dev <INTERFACE>, arp -d <IP>
    Windows: arp -d <IP>
